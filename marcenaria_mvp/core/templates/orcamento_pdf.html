<!DOCTYPE html>
<html lang="pt-br">
<head>
{% load custom_filters %}
<style>
@page {
    margin: 2cm;
}

body {
font-family: Arial, sans-serif;
color: #333;
line-height: 1.6;
}

.header {
text-align: center;
margin-bottom: 30px;
border-bottom: 3px solid #2C5530;
padding-bottom: 20px;
}

.header h1 {
color: #2C5530;
margin: 0;
font-size: 28px;
}

.header p {
margin: 5px 0;
color: #666;
}

.info-section {
margin-bottom: 30px;
}

.info-section h2 {
color: #2C5530;
font-size: 18px;
border-bottom: 2px solid #D4A017;
padding-bottom: 5px;
margin-bottom: 15px;
}

.info-grid {
display: grid;
grid-template-columns: 1fr 1fr;
gap: 10px;
}

.info-item {
margin-bottom: 10px;
}

.info-item strong {
color: #2C5530;
}

table {
width: 100%;
border-collapse: collapse;
margin-bottom: 20px;
}

table th {
background-color: #2C5530;
color: white;
padding: 12px;
text-align: left;
font-weight: bold;
}

table td {
padding: 10px;
border-bottom: 1px solid #ddd;
}

table tr:nth-child(even) {
background-color: #f9f9f9;
}

.total-row {
background-color: #D4A017 !important;
font-weight: bold;
font-size: 16px;
}

.total-row td {
color: white;
border: none;
}

.footer {
margin-top: 50px;
text-align: center;
color: #666;
font-size: 12px;
border-top: 1px solid #ddd;
padding-top: 20px;
}

.status-badge {
display: inline-block;
padding: 5px 15px;
border-radius: 20px;
font-size: 14px;
font-weight: bold;
}

.status-rascunho {
background-color: #6c757d;
color: white;
}

.status-enviado {
background-color: #0d6efd;
color: white;
}

.status-aprovado {
background-color: #198754;
color: white;
}
</style>
</head>

<body>
    <div class="header">
        <h1>MARCENARIA PRO</h1>
        <p>Orçamento Profissional</p>
    </div>

    <div class="info-section">
        <h2>Informações do Orçamento</h2>
        <div class="info-grid">
            <div class="info-item">
                <strong>Número:</strong> #{{ orcamento.id }}
            </div>
            <div class="info-item">
                <strong>Data:</strong> {{ orcamento.data_criacao|date:"d/m/Y" }}
            </div>
            <div class="info-item">
                <strong>Status:</strong>
                <span class="status-badge status-{{ orcamento.status }}">
                    {{ orcamento.get_status_display }}
                </span>
            </div>
        </div>
    </div>

    <div class="info-section">
        <h2>Dados do Cliente</h2>
        <div class="info-item">
            <strong>Nome:</strong> {{ orcamento.cliente.nome }}
        </div>
        <div class="info-item">
            <strong>WhatsApp:</strong> {{ orcamento.cliente.whatsapp }}
        </div>
        {% if orcamento.cliente.email %}
        <div class="info-item">
            <strong>Email:</strong> {{ orcamento.cliente.email }}
        </div>
        {% endif %}
        {% if orcamento.cliente.endereco %}
        <div class="info-item">
            <strong>Endereço:</strong> {{ orcamento.cliente.endereco }}
        </div>
        {% endif %}
    </div>

    <div class="info-section">
        <h2>Itens do Orçamento</h2>
        <table>
            <thead>
                <tr>
                    <th>Material/Serviço</th>
                    <th style="text-align: center;">Quantidade</th>
                    <th style="text-align: right;">Preço Unit.</th>
                    <th style="text-align: right;">Subtotal</th>
                </tr>
            </thead>
            <tbody>
                {% for item in orcamento.itens %}
                <tr>
                    <td>{{ item.material }}</td>
                    <td style="text-align: center;">{{ item.qtd }}</td>
                    <td style="text-align: right;">R$ {{ item.preco_unit|floatformat:2 }}</td>
                    <td style="text-align: right;">R$ {{ item.qtd|multiply:item.preco_unit|floatformat:2 }}</td>
                </tr>
                {% endfor %}
                <tr class="total-row">
                    <td colspan="3" style="text-align: right;">TOTAL:</td>
                    <td style="text-align: right;">R$ {{ orcamento.total|floatformat:2 }}</td>
                </tr>
            </tbody>
        </table>
    </div>

    {% if orcamento.imagens %}
    <div class="info-section">
        <h2>Imagens de Referência</h2>
        {% for imagem in orcamento.imagens %}
        <div class="info-item">
            <strong>{{ imagem.descricao }}:</strong> {{ imagem.s3_url }}
        </div>
        {% endfor %}
    </div>
    {% endif %}

    <div class="footer">
        <p>Este orçamento tem validade de 30 dias a partir da data de emissão.</p>
        <p>Marcenaria Pro - Qualidade e Excelência em Marcenaria</p>
    </div>
</body>

</html>
